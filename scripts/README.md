# Скрипты установки инструментов разработки

## install-dev-tools.sh

Скрипт для автоматической установки и настройки инструментов разработки Go и Task.

### Что устанавливает скрипт:

#### Go
- Последнюю версию Go из официального источника
- Настройка переменных окружения (GOPATH, GOBIN)
- Добавление путей в PATH

#### Go Tools
- `gopls` - Language Server Protocol для Go
- `dlv` - Delve debugger
- `goimports` - Автоматическое форматирование импортов
- `golint` - Базовый линтер
- `golangci-lint` - Продвинутый линтер
- `godoc` - Генератор документации
- `gomodifytags` - Модификатор тегов структур
- `impl` - Генератор реализации интерфейсов
- `go-outline` - Анализатор структуры кода
- `gopkgs` - Список пакетов
- `gotests` - Генератор тестов

#### Task
- Последнюю версию Task (современная альтернатива Make)
- Добавление в PATH

### Использование:

```bash
# Запуск скрипта
./scripts/install-dev-tools.sh

# Или с полным путем
bash /root/r/github.com/Kargones/apk-ci/scripts/install-dev-tools.sh
```

### Поддерживаемые системы:

- **Linux**: amd64, arm64, armv6l
- **macOS**: amd64, arm64
- **Windows**: amd64, arm64 (через WSL/Git Bash)

### Особенности:

1. **Автоматическое определение ОС и архитектуры**
2. **Проверка существующих установок** - скрипт проверит, установлены ли уже Go и Task
3. **Обновление** - предложит обновить до последней версии при наличии новых релизов
4. **Безопасная установка** - создает резервные копии и проверяет целостность
5. **Настройка PATH** - автоматически добавляет пути в профиль оболочки
6. **Проверка установки** - в конце выполняет проверку всех установленных компонентов

### Требования:

- Права sudo (для установки в системные директории)
- curl (для скачивания файлов)
- tar/unzip (для распаковки архивов)

### Файлы конфигурации:

Скрипт автоматически определяет и обновляет соответствующий файл профиля:
- `~/.bashrc` (приоритет)
- `~/.zshrc`
- `~/.profile`

### После установки:

1. Перезапустите терминал или выполните:
   ```bash
   source ~/.bashrc  # или ~/.zshrc
   ```

2. Проверьте установку:
   ```bash
   go version
   task --version
   gopls version
   ```

### Устранение неполадок:

#### Go не найден после установки
```bash
# Проверьте PATH
echo $PATH

# Добавьте вручную (временно)
export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin
```

#### Task не найден
```bash
# Проверьте установку
ls -la /usr/local/bin/task

# Добавьте в PATH вручную
export PATH=$PATH:/usr/local/bin
```

#### Проблемы с правами
```bash
# Убедитесь, что у вас есть права sudo
sudo -v

# Или установите в домашнюю директорию (измените скрипт)
```

### Примеры использования после установки:

#### Работа с Go
```bash
# Создание нового проекта
mkdir my-project && cd my-project
go mod init my-project

# Форматирование кода
goimports -w .

# Линтинг
golangci-lint run

# Отладка
dlv debug
```

#### Работа с Task
```bash
# Просмотр доступных задач
task --list

# Выполнение задачи
task build
task test
```

### Обновление инструментов:

Для обновления Go tools:
```bash
# Обновление всех tools
go install golang.org/x/tools/gopls@latest
go install github.com/go-delve/delve/cmd/dlv@latest
# и т.д.
```

Для обновления Task:
```bash
# Повторный запуск скрипта предложит обновление
./scripts/install-dev-tools.sh
```