# Цель
Завершить реализацию нового функционала в проекте на Go 1.25: выявить все незавершённые пункты и составить подробный, пошаговый план доводки с трассируемостью к требованиям и исходному коду.

# Входные артефакты (читать и анализировать)
1) План: `@/.kiro/specs/sonarqube-integration/tasks.md`
2) Требования: `@/.kiro/specs/sonarqube-integration/requirements.md`
3) Дизайн: `@/.kiro/specs/sonarqube-integration/design.md`
4) Весь исходный код проекта (включая тесты)
5) Комментарии вида:
```go
// ToDo: необходимо дополнительно реализовать следующий функционал:
// <ссылки на пункты плана/требований>
// <подробное описание незавершенного функционала>
````

# Строгие правила анализа

* Никаких домыслов: если данных нет — явно помечать как `НЕ ОБНАРУЖЕНО` и указать, чего не хватает.
* Считать незавершённым всё, где есть `ToDo`/`TODO`/`todo`, заглушки (`panic("TODO")`, `return nil`, пустые ветки `switch`/`case`, `// FIXME`, `// STUB`), несоответствие требованиям/дизайну.
* Особо отмечать функции с частичной реализацией (неполные ветвления, неиспользуемые параметры, пустые обработчики ошибок, заглушечные значения, неучтённые edge-cases).
* Учитывать совместимость с Go 1.25 (API/стандартная библиотека), стиль и архитектурные принципы проекта.

# Что нужно получить на выходе — файл `final-plan.md` (Markdown)

Сгенерируй один файл **`final-plan.md`** на русском языке со следующей структурой:

## 1. Краткая сводка

* Цель доводки
* Область охвата (модули/пакеты)
* Критерии готовности релиза (Definition of Done)

## 2. Матрица трассируемости

Таблица:

* `REQ-ID` (из requirements.md)
* `TASK-ID` (из tasks.md)
* `DESIGN-REF` (секции из design.md)
* `CODE-LOCATIONS` (файл:строка, символы) — где реализовано/где должно быть
* `СТАТУС` (реализовано/частично/не реализовано)
* `ПРОБЕЛЫ` (кратко)

## 3. Индекс незавершённых участков кода

Таблица:

* `КОД` (путь к файлу)
* `МЕТКА` (ToDo/TODO/FIXME/STUB)
* `КОНТЕКСТ` (фрагмент/кратко)
* `ССЫЛКИ` (на REQ/TASK/DESIGN)
* `РИСК/ВЛИЯНИЕ` (ошибки, безопасность, производительность)

## 4. Детальный план реализации (по шагам)

Для каждого шага — отдельный подраздел со строгим шаблоном:

### TASK-XX: <краткое имя>

**Связанные требования:** REQ-…
**Связанные пункты плана:** TASK-… (из tasks.md)
**Связанные разделы дизайна:** DESIGN-…
**Точки входа в код:** файлы/функции/интерфейсы (ссылка: строка)
**Что нужно изменить/добавить:** конкретные изменения (интерфейсы, структуры, алгоритмы, обработка ошибок, логи, конфиг)
**Граничные случаи/ошибки:** перечислить и как обрабатывать
**Безопасность и доступы:** что учесть
**Производительность и ресурсы:** что учесть
**Зависимости от других задач:** перечислить
**Миграции и обратная совместимость:** если есть
**Тесты:** перечень юнит/интеграционных/e2e (Given-When-Then), покрываемые сценарии, данные
**Артефакты/документация:** какие файлы/README/комментарии обновить
**Определение готовности (DoD):** чеклист пунктов, которые должны выполняться
**Критерии приёмки:** измеримые, проверяемые, пошагово

(Повторить для всех незавершённых пунктов.)

## 5. План рефакторинга/улучшений (без изменения внешнего поведения)

* Модульные границы, интерфейсы, зависимости
* Обработка ошибок/логирование
* Конфигурация и параметры среды
* Улучшение тестопригодности (интерфейсы, контракты, mock/stub)
* Снижение технического долга, устранение дублирования

## 6. План тестирования и качество

* Стратегия тестов (юнит/интеграция/e2e), приоритеты
* Покрытие (цели/минимумы)
* Инварианты, idempotency, ретраи, таймауты, контексты
* Гейты CI (линтеры, `go vet`, `staticcheck`, SonarQube правила)
* Нефункциональные проверки (память/время/параллельность)

## 7. Риски и меры их снижения

* Матрица рисков (влияние/вероятность, меры)
* План отката (rollback), фичефлаги/тумблеры

## 8. Список артефактов к обновлению

* Документация (README, ADR, комментарии GoDoc)
* Конфиги, схемы, диаграммы
* CI/CD (скрипты, пайплайны)

## 9. Приложения

* Полный список найденных `ToDo/TODO/FIXME/STUB` с контекстами
* Список внешних зависимостей и их влияния
* Ссылки на ключевые участки кода/коммиты

# Доп. требования к оформлению

* Язык: русский.
* Формат: строгий Markdown, таблицы — где подходит.
* Идентификаторы задач/требований/дизайна указывать полностью.
* Все ссылки на код — в формате `path/to/file.go:L123-L145`.
* Ничего не придумывать: если нет данных — `НЕ ОБНАРУЖЕНО`.
* Сначала покрыть критический функционал (безопасность, целостность, отказоустойчивость), затем — остальное.
* Учитывать стиль и архитектурный каркас проекта; максимально переиспользовать существующие функции/паттерны.

# Вывод

Сформируй **только** файл `final-plan.md` согласно структуре выше.
