–°–æ–∑–¥–∞–π –≤ gitea —Ñ—É–Ω–∫—Ü–∏—é –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –≤ –≤–µ—Ç–∫–µ:
- –¥–ª—è –≤–µ—Ç–æ–∫ –∫—Ä–æ–º–µ main –ø–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—ã–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç —Å–æ–≥–ª–∞—Å–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—é –Ω–∏–∂–µ.
- –¥–ª—è –≤–µ—Ç–∫–∏ main –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞:
  - –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–º–º–∏—Ç —Å —Ç–µ–≥–æ–º "sq-start", —Ç–æ –±–µ—Ä–µ–º –µ–≥–æ.
  - –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç.
- –¥–ª—è –≤–µ—Ç–∫–∏ main –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ –±–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç.
- –∫–æ–º–º–∏—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ, –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ –∫ –Ω–æ–≤–æ–º—É.
–í –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç:
```markdown
–í Gitea API –ø—Ä—è–º–æ–≥–æ –ø–æ–ª—è *¬´–æ—Ç –∫–∞–∫–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤–µ—Ç–∫–∞¬ª* –Ω–µ—Ç, –Ω–æ —ç—Ç–æ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API Git-–æ–±—ä–µ–∫—Ç–æ–≤.

---

## üîπ –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–¥—Ö–æ–¥

1. –ü–æ–ª—É—á–∏—Ç—å **–ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –≤ –≤–µ—Ç–∫–µ**

   ```http
   GET /repos/{owner}/{repo}/branches/{branch}
   ```

   ‚Üí –í –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç –ø–æ–ª–µ `commit.sha`.

2. –ù–∞–π—Ç–∏ **–æ–±—â–∏–π –ø—Ä–µ–¥–æ–∫ (merge base)** –≤–µ—Ç–∫–∏ –∏ —Ü–µ–ª–µ–≤–æ–π –≤–µ—Ç–∫–∏ (–æ–±—ã—á–Ω–æ `main`/`master`).
   –í Gitea API –µ—Å—Ç—å –º–µ—Ç–æ–¥:

   ```http
   GET /repos/{owner}/{repo}/compare/{base}...{head}
   ```

   * `base` ‚Äî –≤–µ—Ç–∫–∞, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π, –∫–∞–∫ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —Å–¥–µ–ª–∞–ª–∏ –æ—Ç–≤–µ—Ç–≤–ª–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `main`).
   * `head` ‚Äî –Ω–æ–≤–∞—è –≤–µ—Ç–∫–∞.
   * –í –æ—Ç–≤–µ—Ç–µ –µ—Å—Ç—å –ø–æ–ª–µ:

     ```json
     {
       "merge_base_commit": {
         "sha": "abc123..."
       }
     }
     ```

     –≠—Ç–æ –∏ –±—É–¥–µ—Ç –∫–æ–º–º–∏—Ç, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–µ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–≤–∏–ª–∞—Å—å.

---

## üîπ –ü—Ä–∏–º–µ—Ä bash-—Å–∫—Ä–∏–ø—Ç–∞

```bash
#!/bin/bash

GITEA_URL="https://gitea.example.com/api/v1"
TOKEN="your_token_here"
OWNER="my-org"
REPO="my-repo"
BASE_BRANCH="main"
NEW_BRANCH="feature-x"

resp=$(curl -s -H "Authorization: token $TOKEN" \
    "$GITEA_URL/repos/$OWNER/$REPO/compare/$BASE_BRANCH...$NEW_BRANCH")

commit_sha=$(echo "$resp" | jq -r '.merge_base_commit.sha')

echo "–í–µ—Ç–∫–∞ $NEW_BRANCH –æ—Ç–≤–µ—Ç–≤–∏–ª–∞—Å—å –æ—Ç –∫–æ–º–º–∏—Ç–∞: $commit_sha"
```

---

## üîπ –ü–æ—è—Å–Ω–µ–Ω–∏—è

* `merge_base_commit` ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π –æ–±—â–∏–π –∫–æ–º–º–∏—Ç –º–µ–∂–¥—É –±–∞–∑–æ–≤–æ–π –∏ –Ω–æ–≤–æ–π –≤–µ—Ç–∫–æ–π.
* –ï—Å–ª–∏ –≤–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –Ω–∞–ø—Ä—è–º—É—é –æ—Ç `main`, —Ç–æ —ç—Ç–æ –±—É–¥–µ—Ç –∫–æ–º–º–∏—Ç –Ω–∞ –º–æ–º–µ–Ω—Ç –µ—ë —Å–æ–∑–¥–∞–Ω–∏—è.
* –ï—Å–ª–∏ –≤–µ—Ç–∫–∞ –º–Ω–æ–≥–æ —Ä–∞–∑ –º–µ—Ä–∂–∏–ª–∞—Å—å, `merge_base_commit` –ø–æ–∫–∞–∂–µ—Ç –æ–±—â–∏–π –ø—Ä–µ–¥–æ–∫ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

---
```