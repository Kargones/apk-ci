# –û—Ç—á–µ—Ç –æ–± –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ EDT

**–î–∞—Ç–∞:** 2025-10-15
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–π —Ç–µ—Å—Ç:** TestMain_WithRealYamlFile
**–í–µ—Ä—Å–∏—è:** 5.10.14.1:fbb3d52-debug

## –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ `TestMain_WithRealYamlFile` –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ EDT –≤ —Ñ–æ—Ä–º–∞—Ç 1C-XML **–Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è** –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã 1cedtcli. –ü—Ä–æ—Ü–µ—Å—Å –ª–∏–±–æ –∑–∞–≤–∏—Å–∞–µ—Ç, –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è **—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è** –∏–∑-–∑–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–≥–∞ –≤ –∫–æ–¥–µ.

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê #1: –ë–µ–∑—É—Å–ª–æ–≤–Ω–æ–µ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `internal/entity/one/edt/edt.go`
**–°—Ç—Ä–æ–∫–∏:** 453-461

```go
_, e.LastErr = r.RunCommand(l)
if e.LastErr != nil {
    switch e.LastErr.Error() {
    default:
    case "exec: already started":
        e.LastErr = nil
    }
}
e.LastErr = nil  // ‚Üê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í —Å—Ç—Ä–æ–∫–µ 461 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–±–µ–∑—É—Å–ª–æ–≤–Ω–æ–µ –æ–±–Ω—É–ª–µ–Ω–∏–µ** `e.LastErr = nil`
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–í–°–ï –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è**, –≤–∫–ª—é—á–∞—è:
  - –¢–∞–π–º–∞—É—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
  - –û—à–∏–±–∫–∏ –∑–∞–ø—É—Å–∫–∞ 1cedtcli
  - –û—à–∏–±–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
  - –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Å–±–æ–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ö–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π, –Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –∫–∞–∫ –±—É–¥—Ç–æ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, —Ç–∞–∫ –∫–∞–∫ –æ—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
- –í –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ (app.go:51-57) –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ `c.Convert()` **–±–µ—Å–ø–æ–ª–µ–∑–Ω–∞**

**–ö–æ–¥ –≤ app.go:**
```go
err = c.Convert(ctx, l, cfg)
if err != nil {
    l.Error("–û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏",
        slog.String("–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏", err.Error()),
    )
    return err
}
```
–≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç**, –ø–æ—Ç–æ–º—É —á—Ç–æ `c.Convert()` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `nil` –∏–∑-–∑–∞ —Å—Ç—Ä–æ–∫–∏ 461!

---

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê #2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–π–º–∞—É—Ç–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

**–§–∞–π–ª:** `internal/util/runner/runner.go`
**–°—Ç—Ä–æ–∫–∏:** 106-113

```go
cmd := exec.Command(r.RunString, r.Params...)
// ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è ...
cmd.Dir = r.WorkDir
r.ConsoleOut, err = cmd.Output()  // ‚Üê –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–∞!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§—É–Ω–∫—Ü–∏—è `RunCommand` **–Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `cmd.Output()` **–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏**
- –ï—Å–ª–∏ 1cedtcli –∑–∞–≤–∏—Å–∞–µ—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—á–µ–Ω—å –¥–æ–ª–≥–æ, –ø—Ä–æ—Ü–µ—Å—Å –±—É–¥–µ—Ç –∂–¥–∞—Ç—å **–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ**

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```go
func (r *Runner) RunCommand(ctx context.Context, l *slog.Logger) ([]byte, error) {
    cmd := exec.CommandContext(ctx, r.RunString, r.Params...)
    // ...
}
```

---

### üü° –ü–†–û–ë–õ–ï–ú–ê #3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–π–º–∞—É—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

**–§–∞–π–ª:** `cmd/benadis-runner/main.go`
**–°—Ç—Ä–æ–∫–∞:** 18

```go
ctx := context.Background()
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞
- –î–∞–∂–µ –µ—Å–ª–∏ –±—ã `RunCommand` –ø—Ä–∏–Ω–∏–º–∞–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ–Ω –Ω–µ –∏–º–µ–ª –±—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```go
// –î–ª—è –∫–æ–º–∞–Ω–¥—ã convert —Ä–∞–∑—É–º–Ω—ã–π —Ç–∞–π–º–∞—É—Ç - 30 –º–∏–Ω—É—Ç
ctx, cancel := context.WithTimeout(context.Background(), 30*time.Minute)
defer cancel()
```

---

### üü° –ü–†–û–ë–õ–ï–ú–ê #4: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `internal/entity/one/edt/edt.go`
**–°—Ç—Ä–æ–∫–∏:** 450-461

```go
l.Debug("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞",
    slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", fmt.Sprintf("%v", r.Params)),
)
_, e.LastErr = r.RunCommand(l)
// ‚Üê –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG/INFO
- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–µ 242, –Ω–æ –æ–Ω–æ –º–æ–∂–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```go
l.Debug("–ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã EDT", slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", r.Operation))
_, e.LastErr = r.RunCommand(ctx, l)
if e.LastErr != nil {
    l.Error("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã EDT",
        slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", r.Operation),
        slog.String("–û—à–∏–±–∫–∞", e.LastErr.Error()),
    )
    return
}
l.Debug("–ö–æ–º–∞–Ω–¥–∞ EDT –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ", slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", r.Operation))
```

---

## –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–µ:

```json
{
  "time":"2025-10-14T18:45:50.175430854+03:00",
  "level":"DEBUG",
  "msg":"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞",
  "–û–ø–µ—Ä–∞—Ü–∏—è":"[-data /tmp/4del/ws3055467156 -command export --configuration-files /tmp/4del/d1783877948/src/cfg --project /tmp/4del/s2106241396/LIS]"
}
```

**–ê–Ω–∞–ª–∏–∑:**
- –ö–æ–º–∞–Ω–¥–∞ –±—ã–ª–∞ –∑–∞–ø—É—â–µ–Ω–∞ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **–Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤** - –Ω–∏ –æ–± –æ—à–∏–±–∫–µ, –Ω–∏ –æ–± —É—Å–ø–µ—Ö–µ
- –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ:
  1. –ö–æ–º–∞–Ω–¥–∞ –ª–∏–±–æ –∑–∞–≤–∏—Å–ª–∞
  2. –õ–∏–±–æ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–æ–∫–æ–π 461

---

## –¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ (Call Stack)

```
main() [main.go:16]
  ‚Üì
app.Convert(ctx, l, cfg) [app.go:68]
  ‚Üì
c.Convert(ctx, l, cfg) [edt.go:135] - Convert struct method
  ‚Üì
r.Convert(ctx, l, cfg) [edt.go:388] - Cli struct method
  ‚Üì
r.RunCommand(l) [edt.go:453] ‚Üê –ö–æ–Ω—Ç–µ–∫—Å—Ç –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è!
  ‚Üì
cmd.Output() [runner.go:113] ‚Üê –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ë–ï–ó —Ç–∞–π–º–∞—É—Ç–∞!
```

**–ü—Ä–æ–±–ª–µ–º—ã –≤ —Ü–µ–ø–æ—á–∫–µ:**
1. –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ main.go, –Ω–æ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞
2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π, –Ω–æ **–Ω–µ –¥–æ—Ö–æ–¥–∏—Ç** –¥–æ `RunCommand`
3. `RunCommand` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É **–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏**
4. –õ—é–±–∞—è –æ—à–∏–±–∫–∞ **—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è** —Å—Ç—Ä–æ–∫–æ–π 461

---

## –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ #1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è —Å—Ä–æ—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `internal/entity/one/edt/edt.go`

```diff
func (e *Cli) Convert(_ *context.Context, l *slog.Logger, cfg *config.Config) {
    // ... –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ...

    l.Debug("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞",
        slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", fmt.Sprintf("%v", r.Params)),
    )
    _, e.LastErr = r.RunCommand(l)
    if e.LastErr != nil {
        switch e.LastErr.Error() {
-       default:
        case "exec: already started":
            e.LastErr = nil
+       default:
+           l.Error("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã EDT",
+               slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", e.Operation),
+               slog.String("–û—à–∏–±–∫–∞", e.LastErr.Error()),
+           )
+           return
        }
    }
-   e.LastErr = nil
+   l.Debug("–ö–æ–º–∞–Ω–¥–∞ EDT –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ",
+       slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", e.Operation))
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—à–∏–±–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—Ö–∞ –∏ –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º **–æ—Å—Ç–∞–µ—Ç—Å—è**

---

### –†–µ—à–µ–Ω–∏–µ #2: –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∞–π–º–∞—É—Ç–æ–≤

**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É RunCommand

**–§–∞–π–ª:** `internal/util/runner/runner.go`

```diff
-func (r *Runner) RunCommand(l *slog.Logger) ([]byte, error) {
+func (r *Runner) RunCommand(ctx context.Context, l *slog.Logger) ([]byte, error) {
    // ... –∫–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ...

-   cmd := exec.Command(r.RunString, r.Params...)
+   cmd := exec.CommandContext(ctx, r.RunString, r.Params...)

    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

#### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤ –≤ edt.go

**–§–∞–π–ª:** `internal/entity/one/edt/edt.go`

```diff
-func (e *Cli) Convert(_ *context.Context, l *slog.Logger, cfg *config.Config) {
+func (e *Cli) Convert(ctx *context.Context, l *slog.Logger, cfg *config.Config) {
    // ... –∫–æ–¥ ...

-   _, e.LastErr = r.RunCommand(l)
+   _, e.LastErr = r.RunCommand(*ctx, l)

    if e.LastErr != nil {
+       // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω —Ç–∞–π–º–∞—É—Ç
+       if errors.Is(e.LastErr, context.DeadlineExceeded) {
+           l.Error("–ü—Ä–µ–≤—ã—à–µ–Ω —Ç–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã EDT",
+               slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", e.Operation),
+               slog.Duration("–¢–∞–π–º–∞—É—Ç", <–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ>),
+           )
+           return
+       }
+
        switch e.LastErr.Error() {
-       default:
        case "exec: already started":
            e.LastErr = nil
+       default:
+           l.Error("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã EDT",
+               slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", e.Operation),
+               slog.String("–û—à–∏–±–∫–∞", e.LastErr.Error()),
+           )
+           return
        }
    }
-   e.LastErr = nil
+   l.Debug("–ö–æ–º–∞–Ω–¥–∞ EDT –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ",
+       slog.String("–û–ø–µ—Ä–∞—Ü–∏—è", e.Operation))
}
```

#### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–§–∞–π–ª:** `internal/config/config.go`

```go
type AppConfig struct {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...

    EdtTimeout time.Duration `yaml:"edt_timeout" env:"EDT_TIMEOUT" env-default:"30m"`
}
```

#### –®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –≤ app.Convert

**–§–∞–π–ª:** `internal/app/app.go`

```diff
func Convert(ctx *context.Context, l *slog.Logger, cfg *config.Config) error {
+   // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º –¥–ª—è EDT –æ–ø–µ—Ä–∞—Ü–∏–π
+   edtCtx, cancel := context.WithTimeout(*ctx, cfg.AppConfig.EdtTimeout)
+   defer cancel()

    // ... –∫–æ–¥ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ç–æ–∫ ...

-   err = c.Convert(ctx, l, cfg)
+   err = c.Convert(&edtCtx, l, cfg)
    if err != nil {
        l.Error("–û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏",
            slog.String("–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏", err.Error()),
        )
        return err
    }

    return nil
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—à–∏–±–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞

---

### –†–µ—à–µ–Ω–∏–µ #3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Ç–∞–π–º–∞—É—Ç–∞

**–¶–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —á–µ—Ä–µ–∑ YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–§–∞–π–ª:** `app.yaml`

```yaml
paths:
  edt_cli: "/opt/1C/1CE/components/1c-edt-2024.2.6+7-x86_64/1cedtcli"
  # ... –¥—Ä—É–≥–∏–µ –ø—É—Ç–∏ ...

timeouts:
  edt_convert: "30m"  # –¢–∞–π–º–∞—É—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ EDT
  edt_import: "20m"   # –¢–∞–π–º–∞—É—Ç –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
  edt_export: "20m"   # –¢–∞–π–º–∞—É—Ç –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
```

–ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
1. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É `e.LastErr = nil` –≤ edt.go:461
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–º–µ—Å—Ç–æ `default:` –≤ switch
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ `RunCommand`
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `exec.CommandContext` –≤–º–µ—Å—Ç–æ `exec.Command`
6. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É `context.DeadlineExceeded`

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—É–ª—É—á—à–µ–Ω–∏—è):
7. ‚úÖ –°–¥–µ–ª–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏ —á–µ—Ä–µ–∑ YAML
8. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
9. ‚úÖ –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è

–ö–æ–º–∞–Ω–¥–∞ `1cedtcli` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```
-data /tmp/4del/ws3055467156
-command export
--configuration-files /tmp/4del/d1783877948/src/cfg
--project /tmp/4del/s2106241396/LIS
```

–º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–∞—Ç—å –∏–∑-–∑–∞:
1. **–ë–æ–ª—å—à–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç
2. **–ü—Ä–æ–±–ª–µ–º —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** - EDT –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π** - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –ø—Ä–æ–µ–∫—Ç–∞
4. **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤** - –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏ –∏–ª–∏ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
5. **–ü—Ä–æ–±–ª–µ–º —Å X-—Å–µ—Ä–≤–µ—Ä–æ–º** - Xvfb –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ EDT**:
   ```bash
   ls -la /tmp/4del/ws3055467156/.metadata/.log
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é** —Å —Ç–∞–π–º–∞—É—Ç–æ–º:
   ```bash
   timeout 5m /opt/1C/1CE/components/1c-edt-2024.2.6+7-x86_64/1cedtcli \
     -data /tmp/4del/ws3055467156 \
     -command export \
     --configuration-files /tmp/4del/d1783877948/src/cfg \
     --project /tmp/4del/s2106241396/LIS
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å X-—Å–µ—Ä–≤–µ—Ä–∞**:
   ```bash
   DISPLAY=:99 xdpyinfo
   ```

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
   ```bash
   watch -n 1 'ps aux | grep 1cedtcli'
   ```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã **–¥–≤–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ EDT:

1. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫** (—Å—Ç—Ä–æ–∫–∞ 461 –≤ edt.go)
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–π–º–∞—É—Ç–∞** –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–∏ –ø–æ–∑–≤–æ–ª–∏—Ç —É–≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è. –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–µ–∏—Ö –æ—à–∏–±–æ–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥–µ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –Ω–∞—á–∞—Ç—å —Å **–†–µ—à–µ–Ω–∏—è #1** –¥–ª—è —Å—Ä–æ—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∑–∞—Ç–µ–º –≤–Ω–µ–¥—Ä–∏—Ç—å **–†–µ—à–µ–Ω–∏–µ #2** –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

---

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** Claude Code
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞, –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—ã–∑–æ–≤–æ–≤
