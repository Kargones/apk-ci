# План проверки работоспособности golangci-lint версии 2

## Цель

Проверить корректность установки и работоспособность golangci-lint версии 2 в проекте benadis-runner.

## План проверки

### 1. Проверка установки golangci-lint

#### 1.1. Проверка наличия исполняемого файла
```bash
# Проверить, что golangci-lint доступен в PATH
which golangci-lint

# Проверить версию установленного golangci-lint
golangci-lint --version
```

#### 1.2. Проверка установки через скрипт
```bash
# Запустить скрипт установки
./scripts/inst-golangci-lint-v2.sh

# Проверить версию после установки
golangci-lint --version
```

### 2. Проверка конфигурации

#### 2.1. Проверка файла .golangci.yml
- Убедиться, что файл существует и доступен
- Проверить, что в первой строке указано: `# .golangci.yml (for golangci-lint v2)`
- Убедиться, что версия в конфигурации установлена как "2"

#### 2. Проверка совместимости конфигурации
```bash
# Проверить конфигурацию
golangci-lint config verify
```

### 3. Проверка работы линтера

#### 3.1. Запуск линтера на тестовом файле
```bash
# Запустить линтер на всем проекте
golangci-lint run

# Запустить линтер на конкретном файле
golangci-lint run internal/config/config.go
```

#### 3.2. Проверка интеграции с Makefile
```bash
# Запустить линтер через Makefile
make lint
```

### 4. Проверка вывода линтера

#### 4.1. Формат вывода
- Проверить, что вывод соответствует ожидаемому формату (JSON в соответствии с конфигурацией)
- Убедиться, что линтер выдает предупреждения и ошибки в правильном формате

#### 4.2. Содержание вывода
- Проверить, что линтер обнаруживает те же проблемы, что и в предыдущих отчетах (lint_report.txt, lint_full_report.txt)
- Убедиться, что все настроенные линтеры работают корректно

### 5. Проверка производительности

#### 5.1. Время выполнения
```bash
# Замерить время выполнения линтера
time golangci-lint run
```

#### 5.2. Сравнение с предыдущими версиями
- Сравнить время выполнения с предыдущими отчетами, если доступны

## Критерии успеха

1. golangci-lint версии 2 успешно устанавливается через скрипт
2. Установленная версия корректно определяется командой `golangci-lint --version`
3. Линтер корректно читает конфигурационный файл .golangci.yml
4. Линтер успешно запускается на кодовой базе проекта
5. Линтер выдает ожидаемые результаты в правильном формате
6. Интеграция с Makefile работает корректно
7. Производительность находится в приемлемых пределах

## Возможные проблемы и решения

### 1. "command not found"
- Проверить PATH переменные
- Убедиться, что GOPATH/bin добавлен в PATH
- Перезапустить терминал или выполнить `source ~/.bashrc`

### 2. Ошибки конфигурации
- Проверить синтаксис .golangci.yml
- Убедиться, что все используемые линтеры поддерживаются версией 2

### 3. Проблемы совместимости
- Проверить, что используемая версия Go (1.24.3) совместима с golangci-lint v2
- Убедиться, что все зависимости проекта совместимы

## Дополнительные проверки

### 1. Проверка в различных средах
- Linux (основная целевая платформа)
- macOS (если требуется поддержка)
- Windows (если требуется поддержка)

### 2. Проверка обновления с предыдущих версий
- Убедиться, что установка поверх предыдущей версии проходит успешно
- Проверить, что конфигурации остаются совместимыми

## Отчет о проверке

После выполнения всех проверок необходимо составить отчет, включающий:
1. Результаты каждой проверки
2. Выявленные проблемы их решения
3. Рекомендации по дальнейшему использованию
4. Скриншоты или логи при необходимости