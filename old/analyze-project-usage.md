# Команда analyze-project

Команда `analyze-project` анализирует структуру проекта в Git-репозитории и определяет имя проекта и его расширения.

## Описание

Команда выполняет следующие действия:
1. Получает полный путь к репозиторию и токен доступа из переменных окружения
2. Получает список корневых каталогов ветки main репозитория, не начинающихся с точки
3. Находит имя каталога, не включающее точку
4. Если есть хотя бы один каталог вида `<найденное имя>.<произвольная строка>`, то:
   - Найденное имя считается именем проекта
   - Все строки после точки считаются именами расширений
5. Выводит информацию о имени проекта и список расширений

## Переменные окружения

- `BR_COMMAND=analyze-project` - команда для выполнения
- `BR_REPO_URL` - полный URL репозитория (например: `https://gitea.example.com/owner/repo`)
- `BR_ACCESS_TOKEN` - токен доступа к API Gitea

## Пример использования

```bash
# Установка переменных окружения
export BR_COMMAND="analyze-project"
export BR_REPO_URL="https://gitea.example.com/myorg/myproject"
export BR_ACCESS_TOKEN="your_access_token_here"

# Запуск команды
./apk-ci
```

## Пример структуры проекта

Для репозитория со следующей структурой:
```
/
├── MyProject/
├── MyProject.Extension1/
├── MyProject.Extension2/
├── .git/
└── README.md
```

Команда выведет:
- Имя проекта: `MyProject`
- Расширения: `[Extension1, Extension2]`

## Логирование

Команда выводит подробную информацию о процессе анализа:
- URL репозитория
- Владелец и имя репозитория
- Результаты анализа
- Ошибки, если они возникли